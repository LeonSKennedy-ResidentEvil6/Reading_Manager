<% if @book.list %>
    <h1>Add a new book to the reading list of <%= @book.list.title %></h1>
<% else %>
    <h1>Add a new book to a list<h1>
<% end %>

<% if @book.errors.any? %>
    <ul>
        <% @book.errors.full_messages.each do |message| %>
        <li><%= message %></li>
        <% end %>
    </ul>
<% end %>

<%= form_for([@book.list, @book]) do |f|%>

    <% if !@book.list %>
        <%= f.label :list%>
        <%= f.collection_select :list_id, List.all, :id, :title %>
    <% else %>
        <%= f.hidden_field :list_id %>
    <% end %>

    <p>
        <%= f.label :title %><br>
        <%= f.text_field :title %><br>
    </p>
    <br>
    <p>
        <%= f.label :author %><br>
        <%= f.text_area :author %><br>
    </p>
    <br>
    <p>
        <%= f.label :note %><br>
        <%= f.text_area :note %><br>
    </p>
    <br>
    <%= f.submit %>

<% end %>